script:
  - docker build --target test --tag my-test-image .
  - docker run --env-file .env.test my-test-image tests
  - docker run --env FLASK_APP --env FLASK_ENV --env SECRET_KEY --env TRELLO_BOARD_ID --env TRELLO_KEY --env TRELLO_TOKEN my-test-image tests_e2e
env:
  global:
    - FLASK_APP=todo_app/app
    - FLASK_ENV=development
    - SECRET_KEY=secret-key
    - TRELLO_BOARD_ID=609542268e084d62bd913af7
    # TRELLO_KEY
    - secure: "ncxFq34BNZHezLqRfL1Zn+LfI9CFOSyUNUtQZbPzatGcKFL7prA/xOPHWjdA35pZIK8IC9wuoCLA/VI/ruXUqDk8MB85jOFT7GwBmfs0cvnVLVp499WpTIOeg5OhjO9f5vlfDGBFsG2ButSGwQldtrE2ig5HnKymTKMEWy+wnaRVUZ5GvaM0r+oIuXJrcKMYsLcw4m8iK/J+AvNep3vRPtdue2HEXdTQ9JQUtQ/dbr7NndzpPOjh34ACjjQ6gwy0rDgm5QJPJmm2NAEMkg9Sgxl2VTiPugB+oIp34TuIZJq/WZS/CEqzPcNtoAvzdMogf+7TmCmhDIC6yWBwPLFu5MoMeydoZkTpJoT/jmGXZle525Ms7o2WOHMzqqj7jAQeG3aQVrc7J+RUoU+kF+YpjlSNt+JXSaitsW0U3MIWqg0JbStaAjFYJrYx7UWV9aGeVE+/0XKAheBFRo8ElMXcwfBx/uD+7jJk0CpXziLrYHRxx7pkNjysMkuYoUmVGTspstRMjn/Za/bUJznZEuFWMgg4LKsvDDHwZ3HbLxIroz0NvwHgWEVvgaYz4jw6b+iQSpQvEsllBQ+iZHkdxHPbd3lzBJ4ZG2s5ozN+emquBA12bhOShJcNzALoNvxpJ1XY7Dqsfw1UA1NUi7U5no6w7ob/J3LYhq9fnyDLCJ7QhlI="
    # TRELLO_TOKEN
    - secure: "oON8hxyA5pifPBUzUIX2f2OHxTvCBPuPbv12i2fxeKOPriIKv14J1RNJohbv5dnH4CPTetFD8kGtC2nwaThESotju5DzrDms+v6WMQCu7hyD8fiycbcSikH/Yn1eEVZSAjiwwuN2gstLzclr+H+gY7BiH4/EfgCGJNQ97XvuYSUnJ13z7EwBLg0Hm6aP0tL8SjRAkwva/5djFHY24nGj1IxqdLnM6MlvSlPHQoedv8wECDmTFPGVX14uZ5ipJ4R7Tak6facL84I6VZ0xryLw1s1+hRqp+0/jbXRoidkY8cbf7QSDtD8mGMnIqew0Hdm8vcqeSvHTnS93SmV+AKOl2EvGdHY5ZzmpKxj+RiTZcYO6BNNJkLd231x3TQfWyHX2SGvLHJfik2ao7c+YAGgJRyCQiiQ5jfO2XQ0NTxs6Q7OF+R+haPeszF8MbEXh6cTq2Jk/qZ+EXLrOi/l/D9yvdceV8IYyDkEK//57YRf7b3i8oc16cf3ErXTbTkmPflCkfKmd1HUQ5cCw3xGKVAynBM9ZHRfokkP8FgeZ2GnnahqTECP0BJO3VAQz3EMgx4ESywoIfD1oqZ7lmksVIx0B1OeSWLx42GQ9eevt8NhDwF3VeAokIIClanF6aEyoNINFtKW7mBHINhAyOX5QoaYxlwPyaz/LuihSphIJLZbVs10="
